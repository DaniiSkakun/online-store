require('dotenv').config();
const {City, District} = require('./models/models');

const cities = [
  'Винница','Житомир','Чернигов','Сумы','Полтава','Кременчуг','Черкассы','Запорожье',
  'Ивано-Франковск','Тернополь','Ужгород','Луцк','Ровно','Николаев','Херсон',
  'Мариуполь','Кривой Рог','Белая Церковь','Борисполь','Буча'
];

const districts = [
  ['Винница',['Замостянский','Ленинский','Старогородской']],
  ['Житомир',['Богунский','Королевский']],
  ['Чернигов',['Деснянский','Новозаводской']],
  ['Сумы',['Ковпаковский','Заречный']],
  ['Полтава',['Шевченковский','Киевский']],
  ['Кременчуг',['Автозаводский','Крюковский']],
  ['Черкассы',['Приднепровский','Сосновский']],
  ['Запорожье',['Александровский','Коммунарский','Вознесеновский']],
  ['Ивано-Франковск',['Центральный','Быстрицкий']],
  ['Тернополь',['Центральный','Сонячный']],
  ['Ужгород',['Центральный','Новый']],
  ['Луцк',['Боженко','Центральный']],
  ['Ровно',['Центральный','Юбилейный']],
  ['Николаев',['Центральный','Ингульский']],
  ['Херсон',['Суворовский','Днепровский']],
  ['Мариуполь',['Центральный','Приморский','Кальмиусский']],
  ['Кривой Рог',['Центрально-Городской','Металлургический']],
  ['Белая Церковь',['Сквирский','Таращанский']],
  ['Борисполь',['Центральный']],
  ['Буча',['Центральный','Яблунька']]
];

(async () => {
  try {
    for (const name of cities) {
      await City.findOrCreate({ where: { name }, defaults: { name } });
    }
    for (const [cityName, dists] of districts) {
      const city = await City.findOne({ where: { name: cityName } });
      if (!city) continue;
      for (const dist of dists) {
        const uniqName = `${dist} (${cityName})`;
        await District.findOrCreate({
          where: { name: uniqName },
          defaults: { name: uniqName, cityId: city.id }
        });
      }
    }
    console.log('✅ Добавлены города и адреса');
    process.exit(0);
  } catch (e) {
    console.error(e);
    process.exit(1);
  }
})();

